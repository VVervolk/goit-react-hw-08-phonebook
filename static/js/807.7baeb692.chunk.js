"use strict";(self.webpackChunkgoit_react_hw_08_phonebook=self.webpackChunkgoit_react_hw_08_phonebook||[]).push([[807],{3807:function(e,n,r){r.r(n),r.d(n,{default:function(){return V}});var t=r(6716),s=r(6351),a=r(1413),c=r(5861),o=r(9439),i=r(4687),l=r.n(i),m=r(9085),d=r(8348),u=r(3541),h=r(1175),p=r(9229),x=r(6907),b=r(2435),j=r(9975),g=r(581),f=r(3182),w=r(1211),y=r(7970),C=r(1216),v=r(2392),k=r(8208),z=r(5442),A=r(6982),Z=r(8007),F=r(5705),_=r(2791),S=r(184);function N(e){var n=e.contact,r=(0,d.q)(),s=r.onOpen,i=r.isOpen,Z=r.onClose,N=(0,t.wY)().refetch,R=(0,t.Nt)(),E=(0,o.Z)(R,1)[0],O=(0,t.wv)(),q=(0,o.Z)(O,1)[0],B=(0,_.useRef)(null),W=(0,_.useRef)(null);function L(){return(L=(0,c.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E(n.id);case 3:m.Am.success("Successful deleting contact!"),N(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),m.Am.error("Oops, something went wrong!");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function Y(){return(Y=(0,c.Z)(l().mark((function e(r){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.id,e.prev=1,e.next=4,q((0,a.Z)({id:t},r));case 4:m.Am.success("Successful editing contact!"),N(),Z(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),m.Am.error("Oops, something went wrong!");case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(u.HC,{mb:"16px",display:"flex",alignItems:"center",children:[(0,S.jsx)(u.DE,{h:"clamp(30px, 4vw, 36px)",w:"clamp(30px, 4vw, 36px)",as:h.q,color:"green.500"}),(0,S.jsxs)(p.x,{fontSize:"clamp(1rem, 3vw, 1.6rem)",children:[n.name,": ",n.number]}),(0,S.jsxs)(x.h,{ml:"auto",gap:"5%",children:[(0,S.jsx)(b.z,{_hover:{bgColor:"white",color:"gray.800",borderColor:"gray.400"},color:"gray.800",backgroundColor:"gray.100",borderWidth:"2px",borderColor:"white",type:"button",onClick:s,children:"Edit"}),(0,S.jsx)(b.z,{_hover:{bgColor:"white",color:"red.400",borderColor:"red.400"},color:"white",backgroundColor:"red.400",borderWidth:"2px",borderColor:"white",type:"button",onClick:function(){return L.apply(this,arguments)},children:"Delete"})]})]}),(0,S.jsxs)(j.u_,{size:{base:"xs",sm:"sm",md:"md",lg:"lg"},isCentered:!0,initialFocusRef:B,finalFocusRef:W,isOpen:i,onClose:Z,children:[(0,S.jsx)(g.Z,{h:"100%",minW:"414px"}),(0,S.jsxs)(f.h,{children:[(0,S.jsx)(w.x,{children:"Edit contact"}),(0,S.jsx)(y.o,{}),(0,S.jsx)(C.f,{pb:6,children:(0,S.jsx)(v.NI,{children:(0,S.jsx)(F.J9,{initialValues:{name:"".concat(n.name),number:"".concat(n.number)},validationSchema:I,onSubmit:function(e){return Y.apply(this,arguments)},children:(0,S.jsxs)(F.l0,{children:[(0,S.jsx)(k.l,{htmlFor:"name",children:"Name"}),(0,S.jsx)(F.gN,{as:z.I,name:"name",id:"name"}),(0,S.jsx)(F.Bc,{name:"name"}),(0,S.jsx)(k.l,{htmlFor:"number",children:"Number"}),(0,S.jsx)(F.gN,{as:z.I,type:"tel",name:"number",id:"number"}),(0,S.jsx)(F.Bc,{name:"number"}),(0,S.jsxs)(A.m,{pb:"0",gap:"5%",pr:"0",children:[(0,S.jsx)(b.z,{type:"submit",children:"Edit contact"}),(0,S.jsx)(b.z,{onClick:Z,children:"Cancel"})]})]})})})})]})]})]})}var I=Z.Ry().shape({name:Z.Z_().matches(/^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$/,{message:"Name may contain only letters, apostrophe, dash and spaces. For example Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan",excludeEmptyString:!0}).required(),number:Z.Z_().matches(/^[\d\s()+-]+$/,{message:"Phone number must be digits and can contain spaces, dashes, parentheses and can start with +",excludeEmptyString:!0}).required()}),R=r(5048),E=r(176),O=r(8652),q=r(1509),B=r(123),W=r(311),L=r(7806);function Y(){var e=(0,t.wY)().data,n=e&&0!==e.length,r=(0,R.I0)();return(0,S.jsx)(S.Fragment,{children:n?(0,S.jsxs)(W.B,{flexGrow:2,minW:"80%",children:[(0,S.jsx)(L.Z,{pointerEvents:"none",children:(0,S.jsx)(B.G,{color:"blue.600"})}),(0,S.jsx)(z.I,{onChange:function(e){return r((0,q.M)(e.target.value))},type:"text",placeholder:"Find contacts by name"})]}):(0,S.jsx)(p.x,{color:"blue.600",fontWeight:"500",fontSize:"clamp(1rem, 2.5vw, 1.5rem)",mt:"30px",children:"You haven`t add any contact yet!"})})}function J(){var e=(0,d.q)(),n=e.onOpen,r=e.isOpen,s=e.onClose,a=(0,t.wY)(),i=a.data,u=a.refetch,h=a.isLoading,x=(0,t.Tn)(),Z=(0,o.Z)(x,1)[0],N=(0,_.useRef)(null),I=(0,_.useRef)(null);function R(){return(R=(0,c.Z)(l().mark((function e(n,r){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.resetForm,!i.some((function(e){return e.name.toLowerCase()===n.name.toLowerCase()}))){e.next=5;break}return m.Am.warn("".concat(n.name," is already in contacts")),e.abrupt("return");case 5:return e.prev=5,e.next=8,Z(n);case 8:u(),t(),s(),m.Am.success("Successful adding contact!"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(5),m.Am.error("Oops, something went wrong!");case 17:case"end":return e.stop()}}),e,null,[[5,14]])})))).apply(this,arguments)}return(0,S.jsxs)(S.Fragment,{children:[h?(0,S.jsx)("div",{}):(0,S.jsxs)(E.k,{mb:"20px",gap:"5%",mt:"30px",alignItems:"center",justifyContent:"space-between",children:[(0,S.jsx)(Y,{}),(0,S.jsxs)(b.z,{bgColor:"blue.600",color:"white",display:"flex",alignItems:"center",p:"8px",w:"clamp(30px,15%,140px)",onClick:n,fontSize:"clamp(0.5rem, 1.5vw, 1.0rem)",children:[(0,S.jsx)(p.x,{display:{base:"none",md:"block"},children:"Add contact"}),(0,S.jsx)(O.d,{w:{base:"1.9em",md:"1em"},h:{base:"1.9em",md:"1em"},ml:{md:"8px"}})]})]}),(0,S.jsxs)(j.u_,{size:{base:"xs",sm:"sm",md:"md",lg:"lg"},isCentered:!0,initialFocusRef:N,finalFocusRef:I,isOpen:r,onClose:s,children:[(0,S.jsx)(g.Z,{h:"100%",minW:"414px"}),(0,S.jsxs)(f.h,{children:[(0,S.jsx)(w.x,{children:"Add new contact"}),(0,S.jsx)(y.o,{}),(0,S.jsx)(C.f,{pb:6,children:(0,S.jsx)(v.NI,{children:(0,S.jsx)(F.J9,{initialValues:{name:"",number:""},validationSchema:$,onSubmit:function(e,n){return R.apply(this,arguments)},children:(0,S.jsxs)(F.l0,{children:[(0,S.jsx)(k.l,{htmlFor:"name",children:"Name"}),(0,S.jsx)(F.gN,{as:z.I,name:"name",id:"name"}),(0,S.jsx)(F.Bc,{name:"name"}),(0,S.jsx)(k.l,{htmlFor:"number",children:"Number"}),(0,S.jsx)(F.gN,{as:z.I,type:"tel",name:"number",id:"number"}),(0,S.jsx)(F.Bc,{name:"number"}),(0,S.jsxs)(A.m,{pb:"0",gap:"5%",pr:"0",children:[(0,S.jsx)(b.z,{type:"submit",children:"Add contact"}),(0,S.jsx)(b.z,{onClick:s,children:"Cancel"})]})]})})})})]})]})]})}var $=Z.Ry().shape({name:Z.Z_().matches(/^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$/,{message:"Name may contain only letters, apostrophe, dash and spaces. For example Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan",excludeEmptyString:!0}).required(),number:Z.Z_().matches(/^[\d\s()+-]+$/,{message:"Phone number must be digits and can contain spaces, dashes, parentheses and can start with +",excludeEmptyString:!0}).required()}),M=r(7261);function V(){var e=(0,t.wY)().data,n=(0,R.v9)(s.zK),r=e&&0!==e.length;return(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)(M.W,{children:[(0,S.jsx)(J,{}),r&&(0,S.jsx)(u.aV,{children:""===n?e.map((function(e){return(0,S.jsx)(N,{contact:e},e.id)})):e.filter((function(e){return e.name.toLowerCase().includes("".concat(n.toLowerCase()))})).map((function(e){return(0,S.jsx)(N,{contact:e},e.id)}))})]})})}}}]);
//# sourceMappingURL=807.7baeb692.chunk.js.map