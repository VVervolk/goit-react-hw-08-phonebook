"use strict";(self.webpackChunkgoit_react_hw_08_phonebook=self.webpackChunkgoit_react_hw_08_phonebook||[]).push([[807],{3807:function(e,n,r){r.r(n),r.d(n,{default:function(){return G}});var s=r(6716),t=r(6351),a=r(1413),c=r(5861),o=r(9439),i=r(4687),l=r.n(i),m=r(9085),d=r(8348),u=r(3541),p=r(1175),h=r(9229),x=r(6907),b=r(2435),j=r(9975),f=r(581),g=r(3182),w=r(1211),y=r(7970),v=r(1216),C=r(2392),k=r(8208),z=r(5442),A=r(6982),Z=r(8007),F=r(5705),S=r(2791),_=r(114),N=r(1243),I=r(184);function R(e){var n=e.contact,r=(0,d.q)(),t=r.onOpen,i=r.isOpen,Z=r.onClose,R=(0,s.wY)().refetch,O=(0,s.Nt)(),q=(0,o.Z)(O,1)[0],B=(0,s.wv)(),W=(0,o.Z)(B,1)[0],L=(0,S.useRef)(null),Y=(0,S.useRef)(null);function J(){return(J=(0,c.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q(n.id);case 3:m.Am.success("Successful deleting contact!"),R(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),m.Am.error("Oops, something went wrong!");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function $(){return($=(0,c.Z)(l().mark((function e(r){var s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.id,e.prev=1,e.next=4,W((0,a.Z)({id:s},r));case 4:m.Am.success("Successful editing contact!"),R(),Z(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),m.Am.error("Oops, something went wrong!");case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(u.HC,{mb:"16px",display:"flex",alignItems:"center",children:[(0,I.jsx)(u.DE,{h:"clamp(30px, 4vw, 36px)",w:"clamp(30px, 4vw, 36px)",as:p.q,color:"green.500"}),(0,I.jsxs)(h.x,{fontSize:"clamp(1rem, 3vw, 1.6rem)",children:[n.name,": ",n.number]}),(0,I.jsxs)(x.h,{justifyContent:"flex-end",ml:"auto",gap:"5%",children:[(0,I.jsxs)(b.z,{_hover:{bgColor:"white",color:"gray.800",borderColor:"gray.400"},w:"clamp(30px,8vw,80px)",color:"gray.800",backgroundColor:"gray.100",borderWidth:"2px",borderColor:"white",type:"button",onClick:t,fontSize:"clamp(0.5rem, 1.5vw, 1.0rem)",children:[(0,I.jsx)(h.x,{display:{base:"none",md:"block"},children:"Edit"}),(0,I.jsx)(_.d,{w:{base:"2.2em"},h:{base:"2.2em"},display:{md:"none"}})]}),(0,I.jsxs)(b.z,{_hover:{bgColor:"white",color:"red.400",borderColor:"red.400"},w:"clamp(30px,8vw,80px)",color:"white",backgroundColor:"red.400",borderWidth:"2px",borderColor:"white",type:"button",onClick:function(){return J.apply(this,arguments)},fontSize:"clamp(0.5rem, 1.5vw, 1.0rem)",children:[(0,I.jsx)(h.x,{display:{base:"none",md:"block"},children:"Delete"}),(0,I.jsx)(N.p,{w:{base:"2.2em"},h:{base:"2.2em"},display:{md:"none"}})]})]})]}),(0,I.jsxs)(j.u_,{size:{base:"xs",sm:"sm",md:"md",lg:"lg"},isCentered:!0,initialFocusRef:L,finalFocusRef:Y,isOpen:i,onClose:Z,children:[(0,I.jsx)(f.Z,{h:"100%",minW:"414px"}),(0,I.jsxs)(g.h,{children:[(0,I.jsx)(w.x,{children:"Edit contact"}),(0,I.jsx)(y.o,{}),(0,I.jsx)(v.f,{pb:6,children:(0,I.jsx)(C.NI,{children:(0,I.jsx)(F.J9,{initialValues:{name:"".concat(n.name),number:"".concat(n.number)},validationSchema:E,onSubmit:function(e){return $.apply(this,arguments)},children:(0,I.jsxs)(F.l0,{children:[(0,I.jsx)(k.l,{htmlFor:"name",children:"Name"}),(0,I.jsx)(F.gN,{as:z.I,name:"name",id:"name"}),(0,I.jsx)(F.Bc,{name:"name"}),(0,I.jsx)(k.l,{htmlFor:"number",children:"Number"}),(0,I.jsx)(F.gN,{as:z.I,type:"tel",name:"number",id:"number"}),(0,I.jsx)(F.Bc,{name:"number"}),(0,I.jsxs)(A.m,{pb:"0",gap:"5%",pr:"0",children:[(0,I.jsx)(b.z,{type:"submit",children:"Edit contact"}),(0,I.jsx)(b.z,{onClick:Z,children:"Cancel"})]})]})})})})]})]})]})}var E=Z.Ry().shape({name:Z.Z_().matches(/^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$/,{message:"Name may contain only letters, apostrophe, dash and spaces. For example Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan",excludeEmptyString:!0}).required(),number:Z.Z_().matches(/^[\d\s()+-]+$/,{message:"Phone number must be digits and can contain spaces, dashes, parentheses and can start with +",excludeEmptyString:!0}).required()}),O=r(5048),q=r(176),B=r(8652),W=r(1509),L=r(123),Y=r(311),J=r(7806);function $(){var e=(0,s.wY)().data,n=e&&0!==e.length,r=(0,O.I0)();return(0,I.jsx)(I.Fragment,{children:n?(0,I.jsxs)(Y.B,{flexGrow:2,minW:"80%",children:[(0,I.jsx)(J.Z,{pointerEvents:"none",children:(0,I.jsx)(L.G,{color:"blue.600"})}),(0,I.jsx)(z.I,{onChange:function(e){return r((0,W.M)(e.target.value))},type:"text",placeholder:"Find contacts by name"})]}):(0,I.jsx)(h.x,{color:"blue.600",fontWeight:"500",fontSize:"clamp(1rem, 2.5vw, 1.5rem)",mt:"30px",children:"You haven`t add any contact yet!"})})}function M(){var e=(0,d.q)(),n=e.onOpen,r=e.isOpen,t=e.onClose,a=(0,s.wY)(),i=a.data,u=a.refetch,p=a.isLoading,x=(0,s.Tn)(),Z=(0,o.Z)(x,1)[0],_=(0,S.useRef)(null),N=(0,S.useRef)(null);function R(){return(R=(0,c.Z)(l().mark((function e(n,r){var s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=r.resetForm,!i.some((function(e){return e.name.toLowerCase()===n.name.toLowerCase()}))){e.next=5;break}return m.Am.warn("".concat(n.name," is already in contacts")),e.abrupt("return");case 5:return e.prev=5,e.next=8,Z(n);case 8:u(),s(),t(),m.Am.success("Successful adding contact!"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(5),m.Am.error("Oops, something went wrong!");case 17:case"end":return e.stop()}}),e,null,[[5,14]])})))).apply(this,arguments)}return(0,I.jsxs)(I.Fragment,{children:[p?(0,I.jsx)("div",{}):(0,I.jsxs)(q.k,{mb:"20px",gap:"5%",mt:"30px",alignItems:"center",justifyContent:"space-between",children:[(0,I.jsx)($,{}),(0,I.jsxs)(b.z,{bgColor:"blue.600",color:"white",display:"flex",alignItems:"center",p:"8px",w:"clamp(30px,18%,140px)",onClick:n,fontSize:"clamp(0.5rem, 1.5vw, 1.0rem)",children:[(0,I.jsx)(h.x,{display:{base:"none",md:"block"},children:"Add contact"}),(0,I.jsx)(B.d,{w:{base:"1.9em"},h:{base:"1.9em"},display:{md:"none"}})]})]}),(0,I.jsxs)(j.u_,{size:{base:"xs",sm:"sm",md:"md",lg:"lg"},isCentered:!0,initialFocusRef:_,finalFocusRef:N,isOpen:r,onClose:t,children:[(0,I.jsx)(f.Z,{h:"100%",minW:"414px"}),(0,I.jsxs)(g.h,{children:[(0,I.jsx)(w.x,{children:"Add new contact"}),(0,I.jsx)(y.o,{}),(0,I.jsx)(v.f,{pb:6,children:(0,I.jsx)(C.NI,{children:(0,I.jsx)(F.J9,{initialValues:{name:"",number:""},validationSchema:V,onSubmit:function(e,n){return R.apply(this,arguments)},children:(0,I.jsxs)(F.l0,{children:[(0,I.jsx)(k.l,{htmlFor:"name",children:"Name"}),(0,I.jsx)(F.gN,{as:z.I,name:"name",id:"name"}),(0,I.jsx)(F.Bc,{name:"name"}),(0,I.jsx)(k.l,{htmlFor:"number",children:"Number"}),(0,I.jsx)(F.gN,{as:z.I,type:"tel",name:"number",id:"number"}),(0,I.jsx)(F.Bc,{name:"number"}),(0,I.jsxs)(A.m,{pb:"0",gap:"5%",pr:"0",children:[(0,I.jsx)(b.z,{type:"submit",children:"Add contact"}),(0,I.jsx)(b.z,{onClick:t,children:"Cancel"})]})]})})})})]})]})]})}var V=Z.Ry().shape({name:Z.Z_().matches(/^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$/,{message:"Name may contain only letters, apostrophe, dash and spaces. For example Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan",excludeEmptyString:!0}).required(),number:Z.Z_().matches(/^[\d\s()+-]+$/,{message:"Phone number must be digits and can contain spaces, dashes, parentheses and can start with +",excludeEmptyString:!0}).required()}),D=r(7261);function G(){var e=(0,s.wY)().data,n=(0,O.v9)(t.zK),r=e&&0!==e.length;return(0,I.jsx)(I.Fragment,{children:(0,I.jsxs)(D.W,{children:[(0,I.jsx)(M,{}),r&&(0,I.jsx)(u.aV,{children:""===n?e.map((function(e){return(0,I.jsx)(R,{contact:e},e.id)})):e.filter((function(e){return e.name.toLowerCase().includes("".concat(n.toLowerCase()))})).map((function(e){return(0,I.jsx)(R,{contact:e},e.id)}))})]})})}}}]);
//# sourceMappingURL=807.e4bd0a05.chunk.js.map